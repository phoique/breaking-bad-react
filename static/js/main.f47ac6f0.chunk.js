(this["webpackJsonpbreaking-bad-react"]=this["webpackJsonpbreaking-bad-react"]||[]).push([[0],{65:function(e,t,a){},66:function(e,t,a){"use strict";a.r(t);var c,n,r=a(0),s=a.n(r),i=a(18),l=a.n(i),d=a(9),o=a(3),u=a(4),j=a(13),b=a(10),h=a.n(b),m=a(12),O=a(34),v=a.n(O).a.create({baseURL:"https://www.breakingbadapi.com/api"}),f=Object(d.b)("/characters/fetchCharacters",function(){var e=Object(m.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.get("/characters",{params:t});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),x=Object(d.b)("/characters/fetchCharacterById",function(){var e=Object(m.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.get("/characters/".concat(t));case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),p=Object(d.d)({name:"character",initialState:{status:"idle",items:[],limit:16,error:null,hasNextPage:null,currentPage:0,detail:{status:"idle",item:[],error:null}},reducers:{nextPageNumber:function(e,t){e.currentPage=t.payload}},extraReducers:(c={},Object(u.a)(c,f.pending,(function(e,t){e.status="loading"})),Object(u.a)(c,f.fulfilled,(function(e,t){t.payload.length<e.limit?e.hasNextPage=!1:e.hasNextPage=!0,e.status="succeeded",e.items=[].concat(Object(j.a)(e.items),Object(j.a)(t.payload))})),Object(u.a)(c,f.rejected,(function(e,t){e.status="failed",e.error=t.error.message})),Object(u.a)(c,x.pending,(function(e,t){e.detail.status="loading"})),Object(u.a)(c,x.fulfilled,(function(e,t){e.detail.status="succeeded",t.payload&&t.payload.length>0&&(e.detail.item=t.payload[0])})),Object(u.a)(c,x.rejected,(function(e,t){e.detail.status="failed",e.detail.error=t.error.message})),c)}),g=p.actions.nextPageNumber,N=p.reducer,y=Object(d.b)("/quote/fetchQuotes",Object(m.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.get("/quotes");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))),q=Object(d.b)("/quote/fetchQuoteById",function(){var e=Object(m.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.get("/quotes/".concat(t));case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),w=Object(d.c)({selectId:function(e){return e.quote_id}}),k=w.getSelectors((function(e){return e.quote})),I=w.getInitialState({status:"idle",items:[],limit:16,error:null,detail:{status:"idle",item:[],error:null}}),P=Object(d.d)({name:"character",initialState:I,reducers:{},extraReducers:(n={},Object(u.a)(n,y.pending,(function(e,t){e.status="loading"})),Object(u.a)(n,y.fulfilled,(function(e,t){e.status="succeeded",w.addMany(e,t.payload),e.items=[].concat(Object(j.a)(e.items),Object(j.a)(t.payload))})),Object(u.a)(n,y.rejected,(function(e,t){e.status="failed",e.error=t.error.message})),Object(u.a)(n,q.pending,(function(e,t){e.detail.status="loading"})),Object(u.a)(n,q.fulfilled,(function(e,t){e.detail.status="succeeded",t.payload&&t.payload.length>0&&(e.detail.item=t.payload[0])})),Object(u.a)(n,q.rejected,(function(e,t){e.detail.status="failed",e.detail.error=t.error.message})),n)}).reducer,B=a(1),R=Object(d.a)({reducer:{character:N,quote:P}});function S(e){var t=e.children;return Object(B.jsx)(o.a,{store:R,children:t})}var _=a(8),E=a(2);function C(){return Object(B.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light",children:Object(B.jsxs)("div",{className:"container-fluid",children:[Object(B.jsx)(_.b,{className:"navbar-brand",to:"/",children:"Breaking Bad React (BBR)"}),Object(B.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(B.jsx)("span",{className:"navbar-toggler-icon"})}),Object(B.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNav",children:Object(B.jsxs)("ul",{className:"navbar-nav",children:[Object(B.jsx)("li",{className:"nav-item",children:Object(B.jsx)(_.c,{className:"nav-link",to:"/characters",children:"Characters"})}),Object(B.jsx)("li",{className:"nav-item",children:Object(B.jsx)(_.c,{className:"nav-link",to:"/quotes",children:"Quotes"})})]})})]})})}var Q=s.a.memo(C);var J=function(e){var t=e.character,a=e.lastItemRef;return Object(B.jsx)("div",{className:"col-3 mb-2",ref:a,children:Object(B.jsx)(_.b,{to:"/character/"+t.char_id,className:"characters",children:Object(B.jsxs)("div",{className:"card",children:[Object(B.jsx)("img",{src:t.img,className:"card-img-top",alt:"character_photo"}),Object(B.jsx)("div",{className:"card-body",children:Object(B.jsx)("p",{className:"card-text text-center",children:t.name})})]})})})};var L=function(e){var t=e.center,a=void 0===t||t;return Object(B.jsx)("div",{className:a?"d-flex justify-content-center":"",children:Object(B.jsx)("div",{className:"spinner-border",role:"status",children:Object(B.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})};var M=function(){return Object(B.jsx)("div",{children:"Home page"})};var A=function(e){var t=Object(o.b)(),a=Object(o.c)((function(e){return e.quote}));return Object(r.useEffect)((function(){"idle"===a.status&&t(y())}),[t,a.status]),"loading"===a.status?Object(B.jsx)(L,{}):Object(B.jsx)("div",{className:"row mt-2",children:Object(B.jsx)("div",{className:"list-group col-6",children:a.items.length>0&&a.items.map((function(e){return Object(B.jsxs)(_.b,{to:"/quote/".concat(e.quote_id),className:"list-group-item list-group-item-action d-flex justify-content-between",children:[e.quote," ",Object(B.jsx)("strong",{children:e.author})]},e.quote_id)}))})})},F=a(21);var H=function(){var e,t,a,c,n,s,i=Object(E.f)().id,l=Object(o.b)(),d=Object(o.c)((function(e){return e.quote})),u=Object(o.c)((function(e){return k.selectById(e,i)})),j=Object(r.useState)(),b=Object(F.a)(j,2),h=b[0],m=b[1];return Object(r.useEffect)((function(){u?m(u):l(q(i))}),[l,u,i,d.items]),Object(B.jsx)("div",{className:"quote-detail",children:Object(B.jsxs)("div",{className:"info",children:[Object(B.jsxs)("p",{children:[Object(B.jsx)("strong",{children:"Quote: "}),"loading"===d.detail.status?Object(B.jsx)("span",{className:"placeholder col-4"}):(null===h||void 0===h?void 0:h.quote)||(null===d||void 0===d||null===(e=d.detail)||void 0===e||null===(t=e.item)||void 0===t?void 0:t.quote)]}),Object(B.jsxs)("p",{children:[Object(B.jsx)("strong",{children:"Author: "}),"loading"===d.detail.status?Object(B.jsx)("span",{className:"placeholder col-2"}):(null===h||void 0===h?void 0:h.author)||(null===d||void 0===d||null===(a=d.detail)||void 0===a||null===(c=a.item)||void 0===c?void 0:c.author)]}),Object(B.jsxs)("p",{children:[Object(B.jsx)("strong",{children:"Series: "}),"loading"===d.detail.status?Object(B.jsx)("span",{className:"placeholder col-2"}):(null===h||void 0===h?void 0:h.series)||(null===d||void 0===d||null===(n=d.detail)||void 0===n||null===(s=n.item)||void 0===s?void 0:s.series)]})]})})};var T=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.character})),a=Object(r.useRef)(),c=Object(r.useCallback)((function(c){"loading"!==t.status&&(a.current&&a.current.disconnect(),a.current=new IntersectionObserver((function(a){if(a[0].isIntersecting&&t.hasNextPage){var c=t.currentPage+1;e(g(c));var n=t.limit*c;e(f({limit:t.limit,offset:n}))}})),c&&a.current.observe(c))}),[t,e]);return Object(r.useEffect)((function(){"idle"===t.status&&e(f({limit:t.limit,offset:0}))}),[t.limit,t.status,e]),"failed"===t.status?t.error:Object(B.jsxs)("div",{className:"row mt-2",children:[t.items.length>0&&t.items.map((function(e){return Object(B.jsx)(J,{lastItemRef:c,character:e},e.char_id)})),Object(B.jsx)("div",{className:"text-center",children:"loading"===t.status&&Object(B.jsx)(L,{})})]})};var U=function(){var e,t,a,c,n=Object(E.f)().id,s=Object(o.c)((function(e){return e.character})),i=Object(o.b)(),l=Object(r.useState)(),d=Object(F.a)(l,2),u=d[0],j=d[1];return Object(r.useEffect)((function(){if(n){var e=s.items.find((function(e){return e.char_id===Number(n)}));if(e)return j(e);i(x(n))}}),[i,n,s.items]),"loading"===s.detail.status?Object(B.jsx)(L,{center:!1}):Object(B.jsxs)("div",{className:"character-detail",children:[Object(B.jsx)("img",{src:(null===u||void 0===u?void 0:u.img)||(null===(e=s.detail.item)||void 0===e?void 0:e.img),className:"img-thumbnail rounded",height:"200",width:"200",alt:"character_photo"}),Object(B.jsxs)("div",{className:"info",children:[Object(B.jsxs)("p",{children:[Object(B.jsx)("strong",{children:"Name: "})," ",(null===u||void 0===u?void 0:u.name)||(null===(t=s.detail.item)||void 0===t?void 0:t.name)]}),Object(B.jsxs)("p",{children:[Object(B.jsx)("strong",{children:"Birthday: "})," ",(null===u||void 0===u?void 0:u.birthday)||(null===(a=s.detail.item)||void 0===a?void 0:a.birthday)]}),Object(B.jsxs)("p",{children:[Object(B.jsx)("strong",{children:"Nickname: "})," ",(null===u||void 0===u?void 0:u.nickname)||(null===(c=s.detail.item)||void 0===c?void 0:c.nickname)]})]})]})};var z=function(){return Object(B.jsx)("div",{children:"404 Not Found Page"})};var D=function(){return Object(B.jsx)("div",{className:"container",children:Object(B.jsxs)(_.a,{children:[Object(B.jsx)(Q,{}),Object(B.jsxs)(E.c,{children:[Object(B.jsx)(E.a,{path:"/",exact:!0,component:M}),Object(B.jsx)(E.a,{path:"/characters",exact:!0,component:T}),Object(B.jsx)(E.a,{path:"/character/:id",exact:!0,component:U}),Object(B.jsx)(E.a,{path:"/quotes",exact:!0,component:A}),Object(B.jsx)(E.a,{path:"/quote/:id",exact:!0,component:H}),Object(B.jsx)(E.a,{path:"*",component:z})]})]})})};a(65);l.a.render(Object(B.jsx)(s.a.StrictMode,{children:Object(B.jsx)(S,{children:Object(B.jsx)(D,{})})}),document.getElementById("root"))}},[[66,1,2]]]);
//# sourceMappingURL=main.f47ac6f0.chunk.js.map